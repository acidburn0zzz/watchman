#!/opt/bin/watchman -s
# A slightly more complicated service file with function overrides

service_command='/usr/sbin/nginx'
service_pidfile='/var/run/nginx.pid'

nginx.test_config() { "$service_command" -tq; }

nginx.reload() {
	nginx.test_config && {
		watchman.reload
		watchman.msg "Reloading nginx configuration... "
	} || {
		watchman.err "Nginx config test failed, not reloading"
		return 1
	}
}

reload() { nginx.reload; }
